# Commit Details: 5c492ce2

**Repository:** [qf-solochain](https://github.com/QuantumFusion-network/qf-solochain)
**Author:** Andrei Orlov (andor0)
**Date:** 2025-06-04 08:37:04+00:00
**Branch(es):** andor0/issue-371-2
**Commit Link:** [View on GitHub](https://github.com/QuantumFusion-network/qf-solochain/commit/5c492ce21937069b8ccedceefcda89f1a7127429)

## Commit Message
```
cargo fmt
```

## Statistics
- **Files changed:** 2
- **Lines added:** 25
- **Lines deleted:** 33
- **Total changes:** 58

## File Changes

### ✏️ pallets/qf-polkavm/src/lib.rs (modified)
**Changes:** +23 -31

```diff
@@ -84,8 +84,7 @@ pub mod pallet {
 	type CodeVec<T> = BoundedVec<u8, <T as Config>::MaxCodeLen>;
 	pub(super) type CodeVersion = u64;
 	pub(super) type StorageKey<T> = BoundedVec<u8, <T as Config>::MaxStorageKeySize>;
-	pub(super) type CodeStorageKey<T> =
-		(<T as frame_system::Config>::AccountId, StorageKey<T>);
+	pub(super) type CodeStorageKey<T> = (<T as frame_system::Config>::AccountId, StorageKey<T>);
 
 	#[derive(Clone)]
 	pub(super) enum MutatingStorageOperationType {
@@ -116,7 +115,7 @@ pub mod pallet {
 	#[scale_info(skip_type_params(T))]
 	pub(super) struct StorageValue<T: Config> {
 		pub data: BoundedVec<u8, <T as Config>::StorageSize>,
-		pub owner: T::AccountId, 
+		pub owner: T::AccountId,
 	}
 
 	// The `Pallet` struct serves as a placeholder to implement traits, methods and dispatchables
@@ -416,9 +415,7 @@ pub mod pallet {
 				|| -> u64 { frame_system::Pallet::<T>::block_number().saturated_into() },
 				|| -> u64 { 0 },
 				|| -> u64 { 1 },
-				|contract_address: T::AccountId,
-				 key: StorageKey<T>|
-				 -> Option<Vec<u8>> {
+				|contract_address: T::AccountId, key: StorageKey<T>| -> Option<Vec<u8>> {
 					CodeStorage::<T>::get((contract_address, key)).map(|d| d.data.to_vec())
 				},
 			);
@@ -590,10 +587,11 @@ pub mod pallet {
 								Err(_) => return 1010,
 							};
 
-							let result = match caller.user_data.raw_storage.get(&(
-								caller.user_data.addresses[0].clone(),
-								storage_key.clone(),
-							)) {
+							let result = match caller
+								.user_data
+								.raw_storage
+								.get(&(caller.user_data.addresses[0].clone(), storage_key.clone()))
+							{
 								Some(Some(r)) => Some(r.data.to_vec()),
 								Some(None) => None,
 								None => (caller.user_data.get)(
@@ -646,18 +644,18 @@ pub mod pallet {
 
 								caller.user_data.mutating_operations.push((
 									MutatingStorageOperationType::Set,
-									(
-										caller.user_data.addresses[0].clone(),
-										storage_key.clone(),
-									),
-									Some(StorageValue { data: data.clone(), owner: caller.user_data.addresses[1].clone() }),
+									(caller.user_data.addresses[0].clone(), storage_key.clone()),
+									Some(StorageValue {
+										data: data.clone(),
+										owner: caller.user_data.addresses[1].clone(),
+									}),
 								));
 								caller.user_data.raw_storage.insert(
-									(
-										caller.user_data.addresses[0].clone(),
-										storage_key,
-									),
-									Some(StorageValue{ data, owner: caller.user_data.addresses[1].clone() }),
+									(caller.user_data.addresses[0].clone(), storage_key),
+									Some(StorageValue {
+										data,
+										owner: caller.user_data.addresses[1].clone(),
+									}),
 								);
 
 								return 0;
@@ -687,19 +685,13 @@ pub mod pallet {
 
 						caller.user_data.mutating_operations.push((
 							MutatingStorageOperationType::Delete,
-							(
-								caller.user_data.addresses[0].clone(),
-								storage_key.clone(),
-							),
+							(caller.user_data.addresses[0].clone(), storage_key.clone()),
 							None,
 						));
-						caller.user_data.raw_storage.insert(
-							(
-								caller.user_data.addresses[0].clone(),
-								storage_key,
-							),
-							None,
-						);
+						caller
+							.user_data
+							.raw_storage
+							.insert((caller.user_data.addresses[0].clone(), storage_key), None);
 
 						return 0;
 					} else {
```

### ✏️ pallets/qf-polkavm/src/polkavm/linker.rs (modified)
**Changes:** +2 -2

```diff
@@ -1,8 +1,8 @@
 extern crate alloc;
 
 use crate::{
-	BalanceOf, CodeStorageKey, StorageValue, CodeVersion, Config as PalletConfig,
-	MutatingStorageOperation, StorageKey,
+	BalanceOf, CodeStorageKey, CodeVersion, Config as PalletConfig, MutatingStorageOperation,
+	StorageKey, StorageValue,
 	polkavm::{
 		Error, InterruptKind, Module, ProgramCounter, RawInstance, Reg, api::RegValue, error::bail,
 		program::ProgramSymbol,
```
