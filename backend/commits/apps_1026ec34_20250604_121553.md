# Commit Details: 1026ec34

**Repository:** [apps](https://github.com/QuantumFusion-network/apps)
**Author:** Alisher A. Khassanov (khssnv)
**Date:** 2025-06-04 12:15:53+00:00
**Branch(es):** AlexanderVTr/issue-366
**Commit Link:** [View on GitHub](https://github.com/QuantumFusion-network/apps/commit/1026ec34787ca1d7d056d20680207726783219ca)

## Commit Message
```
Update a comment on missing events fix
```

## Statistics
- **Files changed:** 1
- **Lines added:** 15
- **Lines deleted:** 4
- **Total changes:** 19

## File Changes

### ✏️ packages/react-hooks/src/ctx/BlockEvents.tsx (modified)
**Changes:** +15 -4

```diff
@@ -67,12 +67,23 @@ async function manageEvents (api: ApiPromise, prev: PrevHashes, records: Vec<Eve
     .reverse();
   const newEventHash = xxhashAsHex(stringToU8a(stringify(newEvents)));
 
-  // Next check cut balance events which have the same eventHash 
-  // when the transaction hash is the same to/from addresses
-  // and value is the same.
-  // newEventHash !== prev.event So deleted
+  /*
+    We had a problem with missing events in the 'recent events' section and @AlexanderVTr identified it is filtered
+    out here, `newEventHash` is equal for multiple events, for instance for `Balances.Transfer` with the same `from`,
+    `to`, and `value` even though sender's tx nonce and event block is different. The problem appears if those events
+    go one after another and it don't reproduce with another event in between.
+
+    Reproduced on upstream master connected to Polkadot RPC.
+
+    Seems like the filter works for for deduplication, but duplicates are rare and we better relax the filter for now.
+
+    TODO(@khssnv): Report to upstream for a better deduplication solution which does not miss real events.
+  */
+
+  // Upstream filter (avoids duplicates, but miss some events - see above):
   // if (newEventHash !== prev.event && newEvents.length) {
 
+  // QF Network patch filter (avoids missing events, but may show duplicates):
   if (newEvents.length) {
     prev.event = newEventHash;
 
```
